capture:
  rtsp_url: "rtsp://JoeChip:Runciter2024@192.168.145.3/stream1"
  reconnect_delay: 5.0       # How long to wait (seconds) before retrying a lost camera connection
  grab_timeout: 10.0         # How long to wait (seconds) with no new frames before reconnecting

processing:
  resize_width: 640          # Width (pixels) frames are resized to before processing
  resize_height: 360         # Height (pixels) frames are resized to before processing
  clahe_clip_limit: 3.0      # Night-vision contrast boost strength — higher values are more aggressive
  clahe_grid_size: 8         # Grid size used for contrast enhancement — higher values enhance finer detail
  blur_kernel: 5             # Blur amount applied to reduce camera noise before detection (must be odd)
  frame_skip: 4               # Analyze every Nth frame — higher values reduce CPU load but slow response time

detection:
  # Motion detection via frame differencing
  diff_threshold: 18         # How different a pixel must be to count as motion (0–255, lower = more sensitive)
  # Background learning (removes stationary background to isolate moving objects)
  mog2_history: 500          # How many past frames are used to learn what the background looks like
  mog2_var_threshold: 25     # How much a pixel must differ from background to be flagged (lower = more sensitive)
  mog2_detect_shadows: false # Whether to detect and exclude shadows — should be off for nighttime sky
  # Noise cleanup
  morph_kernel_size: 3       # Size of the filter used to clean up noisy detections (pixels)
  morph_erode_iterations: 1  # How many passes of shrinking are applied to remove tiny noise blobs
  morph_dilate_iterations: 2 # How many passes of expanding are applied to fill gaps in detected objects
  # Object size filtering
  min_contour_area: 4        # Smallest object size to consider (pixels²) — filters out single-pixel noise
  max_contour_area: 500      # Largest object size to consider (pixels²) — filters out clouds and large artifacts
  min_circularity: 0.3       # How round an object must be (0–1) — filters out edge streaks and irregular shapes

tracking:
  max_distance: 50           # How far (pixels) an object can move between frames and still be the same track
  max_disappeared: 10        # How many frames an object can go missing before its track is dropped
  min_track_length: 5        # Minimum frames an object must be tracked before it is reported as a detection

recording:
  clip_pre_buffer: 3.0       # Seconds of footage saved before a detection event begins
  clip_post_buffer: 5.0      # Seconds of footage saved after a detection event ends
  clip_dir: "data/clips"     # Folder where recorded video clips are saved
  db_path: "data/db/detections.db"  # Path to the database file used for logging detection events
  log_dir: "data/logs"       # Folder where application log files are written
  jpeg_quality: 70           # Image quality for saved frames (1–100, higher = better quality, larger files)

web:
  host: "0.0.0.0"            # Network address to listen on — 0.0.0.0 makes the dashboard accessible on all interfaces
  port: 8080                 # Port the web dashboard runs on
  stream_fps: 10             # Maximum frames per second delivered to the live stream preview
  stream_quality: 70         # Image quality for the live stream preview (1–100)

schedule:
  enabled: true             # When true, detection only runs within the time window below
  start_time: "20:00"        # Detection begins at this time each day (HH:MM, 24-hour)
  end_time: "05:00"          # Detection ends at this time (set earlier than start for overnight window)
